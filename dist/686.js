"use strict";(self.webpackChunkwebpack_boilerplate=self.webpackChunkwebpack_boilerplate||[]).push([[686],{686:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var o=n(196),r=n(880),i=n(192),s=n.n(i),l=n(716),u=n.n(l),a=n(692);const c=function(){r.Ay.registerPlugin(s()),r.Ay.registerPlugin(u()),a(".r-mute-butn").addClass("is--muted"),a(".r-mute-butn").css("pointer-events","none");let e=document.querySelector(".header-sound"),t=document.querySelector(".header-lyrics");const n=document.querySelector("#hero-pause-butn");let i=document.querySelector("#header-dive"),l=[],c=[],d=0,m=0,p=0;function h(e){try{let t=e.match(/\[(\d{2}):(\d{2}\.\d{2})\]/);if(!t)return null;let n=parseInt(t[1]),o=parseFloat(t[2]);return isNaN(n)||isNaN(o)?null:{time:1e3*(60*n+o),text:e.split("]").pop().trim()}}catch(t){return console.error("Error parsing line:",e,t),null}}async function f(){l=await async function(){try{let e=await fetch("https://11th-hr-test1.netlify.app/lyrics-added/header-lyric.lrc");if(!e.ok)throw new Error("Network response was not ok");return(await e.text()).trim().split("\n")}catch(e){return console.error("Error loading file:",e),[]}}().then((e=>e.map(h).filter((e=>null!==e)))),d=Date.now()-m,l.forEach(((n,o)=>{if(o>=p){let i=setTimeout((()=>{e.paused||(p=o,function(e){t.innerHTML="",l.forEach(((n,o)=>{let r=document.createElement("div");r.innerText=n.text,r.classList.add("lyric-line"),o===e&&r.classList.add("current"),t.appendChild(r)}));let n=t.querySelector(".current");n&&r.Ay.to(t,{scrollTo:{y:n,offsetY:t.offsetHeight/2-n.offsetHeight/2},duration:1,ease:"power2.out"})}(p))}),n.time-m);c.push(i)}}))}function g(){c.forEach((e=>clearTimeout(e))),c=[]}i.addEventListener("click",(()=>{e.volume=0,E(e),a(".r-mute-butn").removeClass("is--muted"),a(".r-mute-butn").find(".r-audio-text").html("Sound on"),a(".r-mute-butn").css("pointer-events","auto")})),n.addEventListener("click",(()=>{C(e)})),e.addEventListener("playing",f),e.addEventListener("pause",(function(){m=Date.now()-d,g()})),e.addEventListener("ended",(()=>{m=0,p=0,g(),e.currentTime=0,e.volume=0,E(e),f()})),a("[underwater-audio-butn]").each((function(e){let t=a(this),n=a(this).find(".r-song-url").text(),i=new o.Howl({src:[n],volume:.3,onend:function(){t.removeClass("is--playing")}});a(this).on("click",(function(){a("[underwater-audio-butn].is--playing").not(a(this)).click(),a(this).toggleClass("is--playing"),a(this).hasClass("is--playing")?(i.play(),k(v)):(i.stop(),b(v))}));const s=a(this).closest(".r-uw-item-content");r.Ay.timeline({scrollTrigger:{trigger:s,start:"top bottom",end:"bottom top",onLeave:()=>{i.stop(),a(this).removeClass("is--playing"),b(v)},onLeaveBack:()=>{i.stop(),a(this).toggleClass("is--playing"),b(v)}}})}));const y=document.querySelector(".r-bg-audio").textContent;let v=new o.Howl({src:[y],volume:0,loop:!0}),w=500;function b(e){e.volume()<1&&e.fade(e.volume(),.4,w),e.pause()&&e.play()}function k(e){e.volume()>0&&(e.fade(e.volume(),0,w),setTimeout((()=>{0===e.volume()&&e.pause()}),w)),console.log("bg paused")}function C(e){let t=e.volume,n=(t-0)/250;const o=()=>{t>0&&(t-=n,t<0&&(t=0,e.pause()),e.volume=t,setTimeout(o,2))};o()}function E(e){let t=e.volume,n=(1-t)/250;const o=()=>{t<1&&(t+=n,t>1&&(t=1),e.volume=t,setTimeout(o,2))};e.paused&&(e.play(),e.currentTime=m/1e3),o()}a(".r-mute-butn").on("click",(function(){a(this).toggleClass("is--muted"),a(this).hasClass("is--muted")?(o.Howler.mute(!0),e.muted=!0,a(this).find(".r-audio-text").html("Sound off")):(o.Howler.mute(!1),e.muted=!1,a(this).find(".r-audio-text").html("Sound on"))})),r.Ay.timeline({scrollTrigger:{trigger:".r-hero-trigger",start:"top center",end:"bottom center",onLeave:()=>{C(e),b(v)},onEnterBack:()=>{E(e),k(v)}}})}}}]);
//# sourceMappingURL=686.js.map